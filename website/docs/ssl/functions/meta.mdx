---
sidebar_position: 13
title: Meta Functions
description: SSL functions for UI, settings, and game system control
tags: [vanilla]
---

# Meta Functions

Functions for controlling the game UI, settings, movies, and system-level operations.

## abs <span class="tag-sfall">sfall</span> {#abs}

```ssl
int/float abs(int/float value)
```

Returns the absolute value of a number.

**Parameters:**
- `value` - The number (int or float)

**Returns:** `int/float` - The absolute value (same type as input)

**Example:**
```ssl
variable result;
result := abs(-5);  // result is 5
```

<FnRef fn="abs" />

---

## active_hand <span class="tag-sfall">sfall</span> {#active_hand}

```ssl
int active_hand
```

Returns which hand slot is currently active (0 = primary, 1 = secondary).

**Returns:** `int` - The active hand index

<FnRef fn="active_hand" />

---

## arctan <span class="tag-sfall">sfall</span> {#arctan}

```ssl
float arctan(float y, float x)
```

Returns the arctangent (atan2) of y/x in radians.

**Parameters:**
- `y` - The Y coordinate
- `x` - The X coordinate

**Returns:** `float` - The angle in radians

<FnRef fn="arctan" />

---

## array_key <span class="tag-sfall">sfall</span> {#array_key}

```ssl
any array_key(int arrayID, int index)
```

Returns the key at the specified index in an associative array.

**Parameters:**
- `arrayID` - The array ID
- `index` - The index

**Returns:** `any` - The key at that index

<FnRef fn="array_key" />

---

## arrayexpr <span class="tag-sfall">sfall</span> {#arrayexpr}

```ssl
int arrayexpr(any key, any value)
```

Used for building arrays in expressions. Pushes a key-value pair onto the array stack.

**Parameters:**
- `key` - The key
- `value` - The value

**Returns:** `int` - Status

<FnRef fn="arrayexpr" />

---

## atof <span class="tag-sfall">sfall</span> {#atof}

```ssl
float atof(string str)
```

Converts a string to a floating-point number.

**Parameters:**
- `str` - The string to convert

**Returns:** `float` - The float value

<FnRef fn="atof" />

---

## atoi <span class="tag-sfall">sfall</span> {#atoi}

```ssl
int atoi(string str)
```

Converts a string to an integer.

**Parameters:**
- `str` - The string to convert

**Returns:** `int` - The integer value

**Example:**
```ssl
variable num;
num := atoi("42");  // num is 42
```

<FnRef fn="atoi" />

---

## ceil <span class="tag-sfall">sfall</span> {#ceil}

```ssl
int ceil(float value)
```

Returns the smallest integer greater than or equal to the value (ceiling).

**Parameters:**
- `value` - The float value to round up

**Returns:** `int` - The ceiling value

**Example:**
```ssl
variable result;
result := ceil(2.3);  // result is 3
```

<FnRef fn="ceil" />

---

## charcode <span class="tag-sfall">sfall</span> {#charcode}

```ssl
int charcode(string str)
```

Returns the ASCII code of the first character of a string.

**Parameters:**
- `str` - The string

**Returns:** `int` - The ASCII code, or 0 if the string is empty

<FnRef fn="charcode" />

---

## cos <span class="tag-sfall">sfall</span> {#cos}

```ssl
float cos(float angle)
```

Returns the cosine of an angle in radians.

**Parameters:**
- `angle` - The angle in radians

**Returns:** `float` - The cosine value

<FnRef fn="cos" />

---

## create_array <span class="tag-sfall">sfall</span> {#create_array}

```ssl
int create_array(int size, int flags)
```

Creates a new permanent array.

**Parameters:**
- `size` - The initial size of the array (use -1 for associative arrays/maps)
- `flags` - Array flags

**Returns:** `int` - The array ID

**Example:**
```ssl
variable arr;
arr := create_array(10, 0);  // Create array with 10 elements
```

<FnRef fn="create_array" />

---

## create_message_window <span class="tag-sfall">sfall</span> {#create_message_window}

```ssl
void create_message_window(string message)
```

Creates a popup message window with the specified text. Use `\n` to separate lines.

**Parameters:**
- `message` - The message text to display

**Example:**
```ssl
create_message_window("Hello!\nThis is a message.");
```

<FnRef fn="create_message_window" />

---

## debug_msg <span class="tag-vanilla">vanilla</span> {#debug_msg}

```ssl
void debug_msg(string text)
```

Prints a string to the debug monitor. Should be used exclusively for debug information instead of `display_msg`.

**Parameters:**
- `text` - Debug text


<FnRef fn="debug_msg" />
---

## difficulty_level <span class="tag-vanilla">vanilla</span> {#difficulty_level}

```ssl
int difficulty_level
```

Returns the current Game difficulty level (defined in the options screen).

**Returns:** `int` - Difficulty constant


<FnRef fn="difficulty_level" />
---

## display_msg <span class="tag-vanilla">vanilla</span> {#display_msg}

```ssl
void display_msg(string message)
```

Displays a string on the in-game PDA display (lower-left hand corner).

**Parameters:**
- `message` - Text to display


<FnRef fn="display_msg" />
---

## div <span class="tag-sfall">sfall</span> {#div}

```ssl
int/float div(int/float dividend, int/float divisor)
```

Performs unsigned integer division. Uses the `div` operator in SSL.

**Parameters:**
- `dividend` - The number to divide
- `divisor` - The number to divide by

**Returns:** `int/float` - The result of division

<FnRef fn="div" />

---

## endgame_movie <span class="tag-vanilla">vanilla</span> {#endgame_movie}

```ssl
void endgame_movie
```

Plays the endgame movie.


<FnRef fn="endgame_movie" />
---

## endgame_slideshow <span class="tag-vanilla">vanilla</span> {#endgame_slideshow}

```ssl
void endgame_slideshow
```

Plays the endgame slideshow. The slideshow will fade in to its palette, so it is proper to call `gfade_out(1)` before this command.


<FnRef fn="endgame_slideshow" />
---

## exp <span class="tag-sfall">sfall</span> {#exp}

```ssl
float exp(float value)
```

Returns e raised to the specified power.

**Parameters:**
- `value` - The exponent

**Returns:** `float` - e^value

<FnRef fn="exp" />

---

## fix_array <span class="tag-sfall">sfall</span> {#fix_array}

```ssl
void fix_array(int arrayID)
```

Converts a temporary array to a permanent array.

**Parameters:**
- `arrayID` - The array to convert

<FnRef fn="fix_array" />

---

## float_msg <span class="tag-vanilla">vanilla</span> {#float_msg}

```ssl
void float_msg(ObjectPtr who, string msg, int type)
```

Attempts to create a floating-text message attached to an object using colors dictated by type.

Special types:
- `FLOAT_MSG_WARNING` - Prints a message centered on the screen (for end-of-quest notifications)
- `FLOAT_MSG_SEQUENTIAL` - Cycles through colors to give critters different-colored messages

**Parameters:**
- `who` - Object to attach message to
- `msg` - Message text
- `type` - Float message type constant

**Example:**
```ssl
float_msg(self_obj, "Hello there!", FLOAT_MSG_NORMAL);
float_msg(dude_obj, "Quest Complete!", FLOAT_MSG_WARNING);
```


<FnRef fn="float_msg" />
---

## free_array <span class="tag-sfall">sfall</span> {#free_array}

```ssl
void free_array(int arrayID)
```

Frees an array and releases its memory.

**Parameters:**
- `arrayID` - The array to free

<FnRef fn="free_array" />

---

## game_ui_disable <span class="tag-vanilla">vanilla</span> {#game_ui_disable}

```ssl
void game_ui_disable
```

Disables game user-interface input from the player (to 'lock-out' the player).

:::warning
You **must** make sure to re-enable the UI at some point afterwards!
:::


<FnRef fn="game_ui_disable" />
---

## game_ui_enable <span class="tag-vanilla">vanilla</span> {#game_ui_enable}

```ssl
void game_ui_enable
```

Re-enables game user-interface input from the player.

:::important
This **must** be called relatively soon after disabling the UI or the player will be stuck, unable to do anything.
:::


<FnRef fn="game_ui_enable" />
---

## game_ui_is_disabled <span class="tag-vanilla">vanilla</span> {#game_ui_is_disabled}

```ssl
int game_ui_is_disabled
```

Returns True if the game UI is currently disabled.

**Returns:** `int` - Boolean


<FnRef fn="game_ui_is_disabled" />
---

## get_array <span class="tag-sfall">sfall</span> {#get_array}

```ssl
any get_array(int arrayID, any key)
```

Gets a value from an array at the specified key/index.

**Parameters:**
- `arrayID` - The array ID
- `key` - The key or index

**Returns:** `any` - The stored value

<FnRef fn="get_array" />

---

## get_ini_setting <span class="tag-sfall">sfall</span> {#get_ini_setting}

```ssl
int get_ini_setting(string setting)
```

Gets an integer value from an INI file.

**Parameters:**
- `setting` - The setting path in format "filename|section|key"

**Returns:** `int` - The value, or 0 if not found

**Example:**
```ssl
variable value;
value := get_ini_setting("ddraw.ini|Main|GlobalScripts");
```

<FnRef fn="get_ini_setting" />

---

## get_ini_string <span class="tag-sfall">sfall</span> {#get_ini_string}

```ssl
string get_ini_string(string setting)
```

Gets a string value from an INI file.

**Parameters:**
- `setting` - The setting path in format "filename|section|key"

**Returns:** `string` - The value, or empty string if not found

<FnRef fn="get_ini_string" />

---

## get_ini_section <span class="tag-sfall">sfall</span> {#get_ini_section}

```ssl
array get_ini_section(string file_path, string section_name)
```

Gets all key-value pairs from a section in an INI file as an associative array.

**Parameters:**
- `file_path` - Path to the INI file
- `section_name` - Name of the section to read

**Returns:** `array` - A temporary associative array containing all key-value pairs from the section. Returns an empty array if the file or section doesn't exist.

**Example:**
```ssl
variable settings;
settings := get_ini_section("mymod.ini", "Options");
// Access values like: settings["SomeKey"]
```

<FnRef fn="get_ini_section" />

---

## get_ini_sections <span class="tag-sfall">sfall</span> {#get_ini_sections}

```ssl
array get_ini_sections(string file_path)
```

Gets all section names from an INI file as an array.

**Parameters:**
- `file_path` - Path to the INI file

**Returns:** `array` - A temporary array containing all section names. Returns -1 if the file doesn't exist or has no sections.

**Example:**
```ssl
variable sections;
sections := get_ini_sections("mymod.ini");
// sections[0], sections[1], etc. contain section names
```

<FnRef fn="get_ini_sections" />

---

## get_mouse_buttons <span class="tag-sfall">sfall</span> {#get_mouse_buttons}

```ssl
int get_mouse_buttons
```

Returns the state of mouse buttons.

**Returns:** `int` - A bitmask of pressed mouse buttons

<FnRef fn="get_mouse_buttons" />

---

## get_mouse_x <span class="tag-sfall">sfall</span> {#get_mouse_x}

```ssl
int get_mouse_x
```

Returns the current X position of the mouse cursor.

**Returns:** `int` - The X coordinate of the mouse cursor

<FnRef fn="get_mouse_x" />

---

## get_mouse_y <span class="tag-sfall">sfall</span> {#get_mouse_y}

```ssl
int get_mouse_y
```

Returns the current Y position of the mouse cursor.

**Returns:** `int` - The Y coordinate of the mouse cursor

<FnRef fn="get_mouse_y" />

---

## get_screen_height <span class="tag-sfall">sfall</span> {#get_screen_height}

```ssl
int get_screen_height
```

Returns the current screen height in pixels.

**Returns:** `int` - The screen height

<FnRef fn="get_screen_height" />

---

## get_screen_width <span class="tag-sfall">sfall</span> {#get_screen_width}

```ssl
int get_screen_width
```

Returns the current screen width in pixels.

**Returns:** `int` - The screen width

<FnRef fn="get_screen_width" />

---

## gfade_in <span class="tag-vanilla">vanilla</span> {#gfade_in}

```ssl
void gfade_in(int time)
```

Does a palette fade from black to the game palette.

:::note
The time parameter is currently not actually used.
:::

**Parameters:**
- `time` - Fade duration (unused)


<FnRef fn="gfade_in" />
---

## gfade_out <span class="tag-vanilla">vanilla</span> {#gfade_out}

```ssl
void gfade_out(int time)
```

Does a palette fade to black.

:::note
The time parameter is currently not actually used.
:::

**Parameters:**
- `time` - Fade duration (unused)


<FnRef fn="gfade_out" />
---

## give_exp_points <span class="tag-vanilla">vanilla</span> {#give_exp_points}

```ssl
void give_exp_points(int points)
```

Adds experience points to the player's total. These points may then be used by the player to enhance skills, etc.

**Parameters:**
- `points` - XP to award


<FnRef fn="give_exp_points" />
---

## global_var <span class="tag-vanilla">vanilla</span> {#global_var}

```ssl
int global_var(int var_index)
```

Returns the value of a global variable.

**Parameters:**
- `var_index` - Global variable index

**Returns:** `int` - Variable value


<FnRef fn="global_var" />
---

## hide_iface_tag <span class="tag-sfall">sfall</span> {#hide_iface_tag}

```ssl
void hide_iface_tag(int tag)
```

Hides an interface tag.

**Parameters:**
- `tag` - The tag constant

<FnRef fn="hide_iface_tag" />

---

## is_iface_tag_active <span class="tag-sfall">sfall</span> {#is_iface_tag_active}

```ssl
int is_iface_tag_active(int tag)
```

Checks if an interface tag is currently active.

**Parameters:**
- `tag` - The tag constant

**Returns:** `int` - 1 if active, 0 otherwise

<FnRef fn="is_iface_tag_active" />

---

## key_pressed <span class="tag-sfall">sfall</span> {#key_pressed}

```ssl
int key_pressed(int dxScancode)
```

Checks if a key is currently pressed.

**Parameters:**
- `dxScancode` - The DirectX scancode of the key to check

**Returns:** `int` - 1 if the key is pressed, 0 otherwise

<FnRef fn="key_pressed" />

---

## language_filter_is_on <span class="tag-vanilla">vanilla</span> {#language_filter_is_on}

```ssl
int language_filter_is_on
```

Returns True if the language filter is currently filtering harsh language.

**Returns:** `int` - Boolean

<FnRef fn="language_filter_is_on" />

---

## len_array <span class="tag-sfall">sfall</span> {#len_array}

```ssl
int len_array(int arrayID)
```

Returns the number of elements in an array.

**Parameters:**
- `arrayID` - The array ID

**Returns:** `int` - The number of elements

<FnRef fn="len_array" />

---

## list_as_array <span class="tag-sfall">sfall</span> {#list_as_array}

```ssl
int list_as_array(int listType)
```

Returns all objects of a given type as a temporary array.

**Parameters:**
- `listType` - The type of objects to list (LIST_CRITTERS, LIST_ITEMS, etc.)

**Returns:** `int` - Array ID containing the objects

<FnRef fn="list_as_array" />

---

## list_begin <span class="tag-sfall">sfall</span> {#list_begin}

```ssl
int list_begin(int listType)
```

Creates a new list for iterating over objects of a certain type.

**Parameters:**
- `listType` - The type of objects (LIST_CRITTERS, LIST_ITEMS, etc.)

**Returns:** `int` - The list ID

**Example:**
```ssl
variable list, critter;
list := list_begin(LIST_CRITTERS);
critter := list_next(list);
while (critter) do begin
    // Process critter
    critter := list_next(list);
end
list_end(list);
```

<FnRef fn="list_begin" />

---

## list_end <span class="tag-sfall">sfall</span> {#list_end}

```ssl
void list_end(int listID)
```

Destroys a list and frees its memory. Always call this when done iterating.

**Parameters:**
- `listID` - The list ID to destroy

<FnRef fn="list_end" />

---

## list_next <span class="tag-sfall">sfall</span> {#list_next}

```ssl
ObjectPtr list_next(int listID)
```

Gets the next object in a list.

**Parameters:**
- `listID` - The list ID

**Returns:** `ObjectPtr` - The next object, or 0 if no more objects

<FnRef fn="list_next" />

---

## local_var <span class="tag-vanilla">vanilla</span> {#local_var}

```ssl
int local_var(int var_index)
```

Returns the value of a local variable.

**Parameters:**
- `var_index` - Local variable index

**Returns:** `int` - Variable value


<FnRef fn="local_var" />
---

## log <span class="tag-sfall">sfall</span> {#log}

```ssl
float log(float value)
```

Returns the natural logarithm (base e) of a number.

**Parameters:**
- `value` - The number

**Returns:** `float` - The natural logarithm

<FnRef fn="log" />

---

## map_var <span class="tag-vanilla">vanilla</span> {#map_var}

```ssl
int map_var(int var_index)
```

Returns the value of a map-global variable.

**Parameters:**
- `var_index` - Map variable index

**Returns:** `int` - Variable value


<FnRef fn="map_var" />
---

## message_str_game <span class="tag-sfall">sfall</span> {#message_str_game}

```ssl
string message_str_game(int fileId, int messageId)
```

Gets a message string from a game message file.

**Parameters:**
- `fileId` - The message file ID
- `messageId` - The message number

**Returns:** `string` - The message text

<FnRef fn="message_str_game" />

---

## play_gmovie <span class="tag-vanilla">vanilla</span> {#play_gmovie}

```ssl
void play_gmovie
```

Plays one of the Fallout movies (full-screen, compressed, etc.).


<FnRef fn="play_gmovie" />
---

## play_sfx <span class="tag-vanilla">vanilla</span> {#play_sfx}

```ssl
void play_sfx
```

Starts a new sound effect to be played on the queue.


<FnRef fn="play_sfx" />
---

## pow <span class="tag-sfall">sfall</span> {#pow}

```ssl
int/float pow(int/float base, int/float exponent)
```

Returns the base raised to the power of the exponent. Uses the `^` operator in SSL.

**Parameters:**
- `base` - The base value
- `exponent` - The exponent value

**Returns:** `int/float` - The result (int if both inputs are int, otherwise float)

**Example:**
```ssl
variable result;
result := 2 ^ 3;  // result is 8
```

<FnRef fn="pow" />

---

## read_byte <span class="tag-sfall">sfall</span> {#read_byte}

```ssl
int read_byte(int address)
```

Reads a byte from a memory address. Limited functionality in CE - only specific addresses are supported.

**Parameters:**
- `address` - The memory address to read

**Returns:** `int` - The byte value at that address

<FnRef fn="read_byte" />

---

## resize_array <span class="tag-sfall">sfall</span> {#resize_array}

```ssl
void resize_array(int arrayID, int newSize)
```

Resizes an array to the specified size.

**Parameters:**
- `arrayID` - The array ID
- `newSize` - The new size

<FnRef fn="resize_array" />

---

## round <span class="tag-sfall">sfall</span> {#round}

```ssl
int round(float value)
```

Returns the nearest integer to the value (standard rounding).

**Parameters:**
- `value` - The float value to round

**Returns:** `int` - The rounded value

**Example:**
```ssl
variable result;
result := round(2.5);  // result is 3
result := round(2.4);  // result is 2
```

<FnRef fn="round" />

---

## running_burning_guy <span class="tag-vanilla">vanilla</span> {#running_burning_guy}

```ssl
int running_burning_guy
```

Returns the setting for the running-burning-guy in the game (defined in the options screen).

**Returns:** `int` - Setting value


<FnRef fn="running_burning_guy" />
---

## scan_array <span class="tag-sfall">sfall</span> {#scan_array}

```ssl
any scan_array(int arrayID, any value)
```

Searches for a value in an array and returns its key/index.

**Parameters:**
- `arrayID` - The array ID
- `value` - The value to search for

**Returns:** `any` - The key/index of the value, or -1 if not found

<FnRef fn="scan_array" />

---

## set_array <span class="tag-sfall">sfall</span> {#set_array}

```ssl
void set_array(int arrayID, any key, any value)
```

Sets a value in an array at the specified key/index.

**Parameters:**
- `arrayID` - The array ID
- `key` - The key or index
- `value` - The value to store

**Example:**
```ssl
variable arr;
arr := create_array(5, 0);
set_array(arr, 0, 100);      // Set index 0 to 100
set_array(arr, "name", "test"); // For associative arrays
```

<FnRef fn="set_array" />

---

## set_global_var <span class="tag-vanilla">vanilla</span> {#set_global_var}

```ssl
void set_global_var(int var_index, int value)
```

Sets the value of a global variable.

**Parameters:**
- `var_index` - Global variable index
- `value` - New value


<FnRef fn="set_global_var" />
---

## set_local_var <span class="tag-vanilla">vanilla</span> {#set_local_var}

```ssl
void set_local_var(int var_index, int value)
```

Sets the value of a local variable.

**Parameters:**
- `var_index` - Local variable index
- `value` - New value


<FnRef fn="set_local_var" />
---

## set_map_var <span class="tag-vanilla">vanilla</span> {#set_map_var}

```ssl
void set_map_var(int var_index, int value)
```

Sets the value of a map-global variable.

**Parameters:**
- `var_index` - Map variable index
- `value` - New value


<FnRef fn="set_map_var" />

---

## sfall_func0 <span class="tag-sfall">sfall</span> {#sfall_func0}

```ssl
any sfall_func0(string funcName)
```

Calls a sfall metarule function with no arguments.

**Parameters:**
- `funcName` - The metarule function name

**Returns:** `any` - The function result

<FnRef fn="sfall_func0" />

---

## sfall_func1 <span class="tag-sfall">sfall</span> {#sfall_func1}

```ssl
any sfall_func1(string funcName, any arg1)
```

Calls a sfall metarule function with one argument.

**Parameters:**
- `funcName` - The metarule function name
- `arg1` - The first argument

**Returns:** `any` - The function result

<FnRef fn="sfall_func1" />

---

## sfall_func2 <span class="tag-sfall">sfall</span> {#sfall_func2}

```ssl
any sfall_func2(string funcName, any arg1, any arg2)
```

Calls a sfall metarule function with two arguments.

**Parameters:**
- `funcName` - The metarule function name
- `arg1` - The first argument
- `arg2` - The second argument

**Returns:** `any` - The function result

<FnRef fn="sfall_func2" />

---

## sfall_func3 <span class="tag-sfall">sfall</span> {#sfall_func3}

```ssl
any sfall_func3(string funcName, any arg1, any arg2, any arg3)
```

Calls a sfall metarule function with three arguments.

**Parameters:**
- `funcName` - The metarule function name
- `arg1` - The first argument
- `arg2` - The second argument
- `arg3` - The third argument

**Returns:** `any` - The function result

<FnRef fn="sfall_func3" />

---

## sfall_func4 <span class="tag-sfall">sfall</span> {#sfall_func4}

```ssl
any sfall_func4(string funcName, any arg1, any arg2, any arg3, any arg4)
```

Calls a sfall metarule function with four arguments.

**Parameters:**
- `funcName` - The metarule function name
- `arg1` - The first argument
- `arg2` - The second argument
- `arg3` - The third argument
- `arg4` - The fourth argument

**Returns:** `any` - The function result

<FnRef fn="sfall_func4" />

---

## sfall_func5 <span class="tag-sfall">sfall</span> {#sfall_func5}

```ssl
any sfall_func5(string funcName, any arg1, any arg2, any arg3, any arg4, any arg5)
```

Calls a sfall metarule function with five arguments.

**Parameters:**
- `funcName` - The metarule function name
- `arg1` through `arg5` - The arguments

**Returns:** `any` - The function result

<FnRef fn="sfall_func5" />

---

## sfall_func6 <span class="tag-sfall">sfall</span> {#sfall_func6}

```ssl
any sfall_func6(string funcName, any arg1, any arg2, any arg3, any arg4, any arg5, any arg6)
```

Calls a sfall metarule function with six arguments.

**Parameters:**
- `funcName` - The metarule function name
- `arg1` through `arg6` - The arguments

**Returns:** `any` - The function result

<FnRef fn="sfall_func6" />

---

## sfall_func7 <span class="tag-sfall">sfall</span> {#sfall_func7}

```ssl
any sfall_func7(string funcName, any arg1, any arg2, any arg3, any arg4, any arg5, any arg6, any arg7)
```

Calls a sfall metarule function with seven arguments.

**Parameters:**
- `funcName` - The metarule function name
- `arg1` through `arg7` - The arguments

**Returns:** `any` - The function result

<FnRef fn="sfall_func7" />

---

## sfall_func8 <span class="tag-sfall">sfall</span> {#sfall_func8}

```ssl
any sfall_func8(string funcName, any arg1, any arg2, any arg3, any arg4, any arg5, any arg6, any arg7, any arg8)
```

Calls a sfall metarule function with eight arguments.

**Parameters:**
- `funcName` - The metarule function name
- `arg1` through `arg8` - The arguments

**Returns:** `any` - The function result

<FnRef fn="sfall_func8" />

---

## sfall_ver_build <span class="tag-sfall">sfall</span> {#sfall_ver_build}

```ssl
int sfall_ver_build
```

Returns the build/patch version number of sfall.

**Returns:** `int` - The build version (e.g., 4)

<FnRef fn="sfall_ver_build" />

---

## sfall_ver_major <span class="tag-sfall">sfall</span> {#sfall_ver_major}

```ssl
int sfall_ver_major
```

Returns the major version number of sfall.

**Returns:** `int` - The major version (e.g., 4)

<FnRef fn="sfall_ver_major" />

---

## sfall_ver_minor <span class="tag-sfall">sfall</span> {#sfall_ver_minor}

```ssl
int sfall_ver_minor
```

Returns the minor version number of sfall.

**Returns:** `int` - The minor version (e.g., 3)

<FnRef fn="sfall_ver_minor" />

---

## show_iface_tag <span class="tag-sfall">sfall</span> {#show_iface_tag}

```ssl
void show_iface_tag(int tag)
```

Shows an interface tag (like the sneak indicator).

**Parameters:**
- `tag` - The tag constant (DUDE_STATE_SNEAKING, DUDE_STATE_LEVEL_UP_AVAILABLE, DUDE_STATE_ADDICTED)

<FnRef fn="show_iface_tag" />

---

## signal_end_game <span class="tag-vanilla">vanilla</span> {#signal_end_game}

```ssl
void signal_end_game
```

Tells the system that a script is indicating the game should be ended. This will return the player to the main menu.

<FnRef fn="signal_end_game" />

---

## sin <span class="tag-sfall">sfall</span> {#sin}

```ssl
float sin(float angle)
```

Returns the sine of an angle in radians.

**Parameters:**
- `angle` - The angle in radians

**Returns:** `float` - The sine value

<FnRef fn="sin" />

---

## sprintf <span class="tag-sfall">sfall</span> {#sprintf}

```ssl
string sprintf(string format, any value)
```

Formats a string using printf-style formatting.

**Parameters:**
- `format` - The format string
- `value` - The value to format

**Returns:** `string` - The formatted string

**Example:**
```ssl
variable s;
s := sprintf("Value: %d", 42);  // s is "Value: 42"
```

<FnRef fn="sprintf" />

---

## sqrt <span class="tag-sfall">sfall</span> {#sqrt}

```ssl
float sqrt(float value)
```

Returns the square root of a number.

**Parameters:**
- `value` - The number to get the square root of

**Returns:** `float` - The square root

**Example:**
```ssl
variable result;
result := sqrt(16.0);  // result is 4.0
```

<FnRef fn="sqrt" />

---

## string_split <span class="tag-sfall">sfall</span> {#string_split}

```ssl
int string_split(string str, string delimiter)
```

Splits a string into an array using the specified delimiter.

**Parameters:**
- `str` - The string to split
- `delimiter` - The delimiter string

**Returns:** `int` - Array ID containing the split strings

**Example:**
```ssl
variable arr;
arr := string_split("one,two,three", ",");
// arr[0] = "one", arr[1] = "two", arr[2] = "three"
```

<FnRef fn="string_split" />

---

## strlen <span class="tag-sfall">sfall</span> {#strlen}

```ssl
int strlen(string str)
```

Returns the length of a string.

**Parameters:**
- `str` - The string

**Returns:** `int` - The length of the string

<FnRef fn="strlen" />

---

## substr <span class="tag-sfall">sfall</span> {#substr}

```ssl
string substr(string str, int start, int length)
```

Returns a substring of a string.

**Parameters:**
- `str` - The source string
- `start` - The starting position (0-indexed, negative values count from end)
- `length` - The number of characters (0 or negative for to-end)

**Returns:** `string` - The substring

**Example:**
```ssl
variable s;
s := substr("Hello World", 0, 5);  // s is "Hello"
s := substr("Hello World", -5, 5); // s is "World"
```

<FnRef fn="substr" />

---

## tan <span class="tag-sfall">sfall</span> {#tan}

```ssl
float tan(float angle)
```

Returns the tangent of an angle in radians.

**Parameters:**
- `angle` - The angle in radians

**Returns:** `float` - The tangent value

<FnRef fn="tan" />

---

## tap_key <span class="tag-sfall">sfall</span> {#tap_key}

```ssl
void tap_key(int dxScancode)
```

Simulates a key press and release.

**Parameters:**
- `dxScancode` - The DirectX scancode of the key to tap

<FnRef fn="tap_key" />

---

## temp_array <span class="tag-sfall">sfall</span> {#temp_array}

```ssl
int temp_array(int size, int flags)
```

Creates a temporary array that is automatically freed at the end of the frame.

**Parameters:**
- `size` - The initial size of the array (use -1 for associative arrays/maps)
- `flags` - Array flags

**Returns:** `int` - The array ID

<FnRef fn="temp_array" />

---

## toggle_active_hand <span class="tag-sfall">sfall</span> {#toggle_active_hand}

```ssl
void toggle_active_hand
```

Toggles between primary and secondary hand slots.

<FnRef fn="toggle_active_hand" />

---

## violence_level_setting <span class="tag-vanilla">vanilla</span> {#violence_level_setting}

```ssl
int violence_level_setting
```

Returns the current setting of the violence level. See <DefineRef name="VLNCLVL_NONE" inline /> and other `VLNCLVL_*` constants.

**Returns:** `int` - Violence level constant

<FnRef fn="violence_level_setting" />

---

## sfall Hook Functions

:::danger Not Implemented in fallout2-ce
Hook registration functions are **not yet implemented** in fallout2-ce. While the opcodes exist, the hook execution mechanism has not been implemented. See the [Hook Scripts](/ssl/hooks) page for more details.
:::

The following functions are used to register custom hook scripts that intercept game events.

### register_hook <span class="tag-sfall">sfall</span> {#register_hook}

```ssl
void register_hook(int hookID)
```

Registers the current script to receive callbacks for the specified hook type. The hook ID constants are defined in **sfall.h** (e.g., `HOOK_TOHIT`, `HOOK_ONDEATH`, `HOOK_COMBATDAMAGE`).

**Parameters:**
- `hookID` - The hook constant (`HOOK_*` from sfall.h)

**Example:**
```ssl
procedure start begin
    if game_loaded then begin
        register_hook(HOOK_ONDEATH);
    end
end

procedure ondeath_handler begin
    variable critter;
    critter := get_sfall_arg;
    display_msg(obj_name(critter) + " has died!");
end
```

---

### register_hook_proc <span class="tag-sfall">sfall</span> {#register_hook_proc}

```ssl
void register_hook_proc(int hookID, procedure handler)
```

Registers a specific procedure as the handler for the specified hook type. This allows multiple hooks to be handled in the same script with separate procedures.

**Parameters:**
- `hookID` - The hook constant (`HOOK_*` from sfall.h)
- `handler` - The procedure to call when the hook fires

**Example:**
```ssl
procedure death_handler begin
    variable critter;
    critter := get_sfall_arg;
    display_msg(obj_name(critter) + " has died!");
end

procedure start begin
    if game_loaded then begin
        register_hook_proc(HOOK_ONDEATH, death_handler);
    end
end
```

---

### get_sfall_arg <span class="tag-sfall">sfall</span> {#get_sfall_arg}

```ssl
any get_sfall_arg
```

Gets the next argument passed to a hook script handler. Call this multiple times to retrieve consecutive arguments in the order they are documented for each hook type.

**Returns:** `any` - The next hook argument

---

### get_sfall_arg_at <span class="tag-sfall">sfall</span> {#get_sfall_arg_at}

```ssl
any get_sfall_arg_at(int index)
```

Gets a specific argument by index from the hook script handler. Index starts at 0.

**Parameters:**
- `index` - The argument index (0-based)

**Returns:** `any` - The argument at that index

---

### set_sfall_return <span class="tag-sfall">sfall</span> {#set_sfall_return}

```ssl
void set_sfall_return(any value)
```

Sets a return value for a hook script. Many hooks allow you to override game behavior by returning specific values.

**Parameters:**
- `value` - The return value

---

### set_sfall_arg <span class="tag-sfall">sfall</span> {#set_sfall_arg}

```ssl
void set_sfall_arg(int index, any value)
```

Modifies a hook argument at the specified index. Useful for passing modified values to subsequent hook handlers in a chain.

**Parameters:**
- `index` - The argument index (0-based)
- `value` - The new value

---

## Interface Functions (sfall)

### message_box <span class="tag-sfall">sfall</span> {#message_box}

```ssl
int message_box(string message, int flags, int color1, int color2)
```

Creates a dialog box with text and returns the result of pressing the button.

**Parameters:**
- `message` - The text in the dialog box. Use `\n` for line breaks
- `flags` (optional) - Mode flags (see `MSGBOX_*` constants in define_extra.h). Pass -1 for defaults (NORMAL and YESNO)
- `color1` (optional) - Color index for the first line (default: 145)
- `color2` (optional) - Color index for subsequent lines (default: 145)

**Returns:** `int` - 0 = No/Escape, 1 = Yes/Done/Enter, -1 = dialog could not be created

**Example:**
```ssl
variable result;
result := message_box("Are you sure you want to continue?\nThis cannot be undone.");
if result then begin
    display_msg("User confirmed.");
end
```

---

### get_window_under_mouse <span class="tag-sfall">sfall</span> {#get_window_under_mouse}

```ssl
int get_window_under_mouse
```

Returns the window ID of the window currently under the mouse cursor.

**Returns:** `int` - Window ID

---

### set_window_flag <span class="tag-sfall">sfall</span> {#set_window_flag}

```ssl
void set_window_flag(string/int winName, int flag, int value)
```

Changes the specified flag for a script or game interface window.

**Parameters:**
- `winName` - Window name (string) or window ID (int). Pass 0 for current game interface
- `flag` - The flag to change (see `WIN_FLAG_*` constants in define_extra.h)
- `value` - 1 to set the flag, 0 to unset it

---

## World Map Functions (sfall)

### get_world_map_x_pos <span class="tag-sfall">sfall</span> {#get_world_map_x_pos}

```ssl
int get_world_map_x_pos
```

Returns the player's current X position on the world map.

**Returns:** `int` - X coordinate

---

### get_world_map_y_pos <span class="tag-sfall">sfall</span> {#get_world_map_y_pos}

```ssl
int get_world_map_y_pos
```

Returns the player's current Y position on the world map.

**Returns:** `int` - Y coordinate

---

### set_world_map_pos <span class="tag-sfall">sfall</span> {#set_world_map_pos}

```ssl
void set_world_map_pos(int x, int y)
```

Sets the player's position on the world map.

**Parameters:**
- `x` - New X coordinate
- `y` - New Y coordinate

---

## Low-Level Functions (sfall)

:::danger Not Implemented in fallout2-ce
Memory access functions (`read_byte`, `read_int`, `write_byte`, `write_int`, etc.) are **not implemented** in fallout2-ce. These functions were designed for the original Fallout 2 engine's memory layout and are not applicable to the rewritten codebase.
:::

:::warning Original sfall Only
The following functions require `AllowUnsafeScripting` to be enabled in ddraw.ini and should be used with extreme caution.
:::

### read_byte <span class="tag-sfall">sfall</span> {#read_byte}

```ssl
int read_byte(int address)
```

Reads a single byte from the specified memory address.

**Parameters:**
- `address` - Memory address to read from

**Returns:** `int` - The byte value at that address

---

### read_int <span class="tag-sfall">sfall</span> {#read_int}

```ssl
int read_int(int address)
```

Reads a 4-byte integer from the specified memory address.

**Parameters:**
- `address` - Memory address to read from

**Returns:** `int` - The integer value at that address

---

### write_byte <span class="tag-sfall">sfall</span> {#write_byte}

```ssl
void write_byte(int address, int value)
```

Writes a single byte to the specified memory address. Requires `AllowUnsafeScripting`.

**Parameters:**
- `address` - Memory address to write to
- `value` - The byte value to write

---

### write_int <span class="tag-sfall">sfall</span> {#write_int}

```ssl
void write_int(int address, int value)
```

Writes a 4-byte integer to the specified memory address. Requires `AllowUnsafeScripting`.

**Parameters:**
- `address` - Memory address to write to
- `value` - The integer value to write

---

## sfall Generic Functions

### sfall_func0 <span class="tag-sfall">sfall</span> {#sfall_func0}

```ssl
any sfall_func0(string funcName)
```

Calls an sfall function by name with no arguments.

**Parameters:**
- `funcName` - The function name (e.g., "get_metarule_table")

**Returns:** `any` - The function's return value

---

### sfall_func1 <span class="tag-sfall">sfall</span> {#sfall_func1}

```ssl
any sfall_func1(string funcName, any arg1)
```

Calls an sfall function by name with 1 argument.

---

### sfall_func2 <span class="tag-sfall">sfall</span> {#sfall_func2}

```ssl
any sfall_func2(string funcName, any arg1, any arg2)
```

Calls an sfall function by name with 2 arguments.

---

### sfall_func3 - sfall_func8 <span class="tag-sfall">sfall</span> {#sfall_func_n}

Similar to above, accepting 3-8 arguments respectively. Used for calling extended sfall functions by name.

```ssl
any sfall_func3(string funcName, any arg1, any arg2, any arg3)
any sfall_func4(string funcName, any arg1, any arg2, any arg3, any arg4)
// ... up to sfall_func8
```
