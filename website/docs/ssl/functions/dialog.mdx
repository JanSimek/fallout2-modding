---
sidebar_position: 8
title: Dialog Functions
description: SSL functions for dialogue system and conversation handling
tags: [vanilla]
---

# Dialog Functions

Functions for managing the dialogue system, NPC conversations, and barter.

## start_dialogue <span class="tag-vanilla">vanilla</span> {#start_dialogue}

```ssl
void start_dialogue(ObjectPtr who, int mood)
```

Starts the dialogue system focusing on a critter and starting in a given mood. This call sets up the appropriate dialog windows, head art, etc.

Macro alias for [`start_gdialog`](#start_gdialog)`(-1, who, mood, -1, -1)`.

:::important
If this call is not made before the normal dialog calls (`gsay_reply`, `gsay_message`, `gsay_option`, etc.) then the dialog windows will not come up, and only grey boxes will appear with the text.
:::

**Parameters:**
- `who` - Critter to talk to
- `mood` - Starting mood constant

<FnRef fn="start_gdialog" />

---

## start_gdialog <span class="tag-vanilla">vanilla</span> {#start_gdialog}

```ssl
void start_gdialog(int msgFileNum, ObjectPtr who, int mood, int headNum, int backgroundIdx)
```

Extended version of `start_dialogue` with additional parameters for message file and head art.

**Parameters:**
- `msgFileNum` - Message file number
- `who` - Critter to talk to
- `mood` - Starting mood constant
- `headNum` - Head art number
- `backgroundIdx` - Background index


<FnRef fn="start_gdialog" />
---

## start_gialog <span class="tag-vanilla">vanilla</span> {#start_gialog}

Alias for [`start_gdialog`](#start_gdialog). See above.

<FnRef fn="start_gdialog" />

---

## end_dialogue <span class="tag-vanilla">vanilla</span> {#end_dialogue}

```ssl
void end_dialogue
```

Terminates the dialogue system.


<FnRef fn="end_dialogue" />
---

## dialogue_system_enter <span class="tag-vanilla">vanilla</span> {#dialogue_system_enter}

```ssl
void dialogue_system_enter
```

Tells the dialog system that this object is requesting the talk system. Used when the script wants to start dialog instead of waiting for the player to initiate it. The script will be called back in its `talk_proc` section.


<FnRef fn="dialogue_system_enter" />
---

## dialogue_reaction <span class="tag-vanilla">vanilla</span> {#dialogue_reaction}

```ssl
void dialogue_reaction(int mood)
```

Sets up a reaction animation in the dialogue system.

**Parameters:**
- `mood` - Mood constant


<FnRef fn="dialogue_reaction" />
---

## gsay_start <span class="tag-vanilla">vanilla</span> {#gsay_start}

```ssl
void gsay_start
```

Starts a new dialog sequence. This must be called before adding replies and options.

The typical dialog structure is:
```ssl
procedure talk_p_proc begin
    start_gdialog(NAME, self_obj, 4, -1, -1);
    gsay_start;
        call Node001;
    gsay_end;
    end_dialogue;
end
```

<FnRef fn="gsay_start" />

---

## gsay_end <span class="tag-vanilla">vanilla</span> {#gsay_end}

```ssl
void gsay_end
```

Ends a dialog sequence, which will bring up the sequence (actually display it).

<FnRef fn="gsay_end" />

---

## gsay_reply <span class="tag-vanilla">vanilla</span> {#gsay_reply}

```ssl
void gsay_reply(int msg_list, int msg_num)
```

Sets up a reply block (what the NPC says).

**Parameters:**
- `msg_list` - Message file number
- `msg_num` - Message number in file

**Example:**
```ssl
procedure Node001 begin
    gsay_reply(SCRIPT_MYCHAR, 100);
    gsay_option(SCRIPT_MYCHAR, 101, Node002, NEUTRAL);
    gsay_option(SCRIPT_MYCHAR, 102, Node003, NEUTRAL);
end
```

<FnRef fn="gsay_reply" />

---

## gsay_option <span class="tag-vanilla">vanilla</span> {#gsay_option}

```ssl
void gsay_option(int msg_list, int msg_num, procedure target, int reaction)
```

Sets up an option-choice for a reply block. The string comes from the message file and message number, causes a given reaction, and if chosen will jump to the given target procedure.

**Parameters:**
- `msg_list` - Message file number
- `msg_num` - Message number
- `target` - Procedure to call if chosen
- `reaction` - Reaction constant (GOOD, NEUTRAL, BAD)

<FnRef fn="gsay_option" />

---

## gsay_message <span class="tag-vanilla">vanilla</span> {#gsay_message}

```ssl
void gsay_message(int msg_list, int msg_num, int reaction)
```

Sets up a sayMessage, which is a reply with just a [Done] option.

**Parameters:**
- `msg_list` - Message file number
- `msg_num` - Message number
- `reaction` - Reaction constant

<FnRef fn="gsay_message" />

---

## giq_option <span class="tag-vanilla">vanilla</span> {#giq_option}

```ssl
void giq_option(int iq_test, int msg_list, int msg_num, procedure target, int reaction)
```

Sets up an option-choice that only appears if the player's IQ is equal to or greater than the given value.

**Parameters:**
- `iq_test` - Minimum IQ required
- `msg_list` - Message file number
- `msg_num` - Message number
- `target` - Procedure to call if chosen
- `reaction` - Reaction constant

**Example:**
```ssl
// Only show this option if player has INT >= 6
giq_option(6, SCRIPT_MYCHAR, 105, NodeSmart, NEUTRAL);

// Low INT option for INT <= 3
giq_option(-3, SCRIPT_MYCHAR, 106, NodeDumb, NEUTRAL);
```

<FnRef fn="giq_option" />

---

## gdialog_barter <span class="tag-vanilla">vanilla</span> {#gdialog_barter}

```ssl
int gdialog_barter
```

Tells the dialog system to switch to the barter screen. Sets the barter modifier to 0.

This is a macro defined in `define_lite.h` that expands to [`gdialog_mod_barter(0)`](#gdialog_mod_barter).

<FnRef fn="gdialog_mod_barter" />

---

## gdialog_mod_barter <span class="tag-vanilla">vanilla</span> {#gdialog_mod_barter}

```ssl
int gdialog_mod_barter(int modifier)
```

Tells the dialog system to switch to the barter screen, using a given modifier percentage.

**Parameters:**
- `modifier` - Percentage modifier (+/-)

<FnRef fn="gdialog_mod_barter" />

---

## gdialog_set_barter_mod <span class="tag-vanilla">vanilla</span> {#gdialog_set_barter_mod}

```ssl
void gdialog_set_barter_mod(int mod)
```

Sets the current modifier for barter to a given percentage. Used to make barter easier/harder, even if the player initiates barter.

**Parameters:**
- `mod` - Percentage modifier


<FnRef fn="gdialog_set_barter_mod" />
---

## message_str <span class="tag-vanilla">vanilla</span> {#message_str}

```ssl
string message_str(int list, int msg_num)
```

Returns a string from the message module for a given list and message number.

**Parameters:**
- `list` - Message file number
- `msg_num` - Message number

**Returns:** `string` - The message text

**Example:**
```ssl
variable greeting;
greeting := message_str(SCRIPT_MYCHAR, 100);
float_msg(self_obj, greeting, FLOAT_MSG_NORMAL);
```

<FnRef fn="message_str" />

---

## float_msg <span class="tag-vanilla">vanilla</span> {#float_msg}

```ssl
void float_msg(ObjectPtr who, string msg, int type)
```

Displays a floating message above an object. The message appears as a text bubble that floats up and fades away.

**Parameters:**
- `who` - Object to display message above
- `msg` - Message text to display
- `type` - Float message type constant

**Float Types:**
- `FLOAT_MSG_NORMAL` (0) - Yellow text
- `FLOAT_MSG_WARNING` (1) - Red text
- `FLOAT_MSG_SEQUENTIAL` (2) - Sequential display
- `FLOAT_MSG_YELLOW` (0) - Same as NORMAL
- `FLOAT_MSG_RED` (1) - Same as WARNING

**Example:**
```ssl
// Display a combat taunt
float_msg(self_obj, "You'll pay for that!", FLOAT_MSG_RED);

// Display reaction message
float_msg(dude_obj, message_str(NAME, 200), FLOAT_MSG_NORMAL);
```

<FnRef fn="float_msg" />

---

## display_msg <span class="tag-vanilla">vanilla</span> {#display_msg}

```ssl
void display_msg(string msg)
```

Displays a message in the game's main message window (the scrolling text at the bottom of the screen).

**Parameters:**
- `msg` - Message text to display

**Example:**
```ssl
display_msg("You discover a hidden cache!");
display_msg(message_str(NAME, 150));
```

<FnRef fn="display_msg" />

---

## NMessage <span class="tag-vanilla">vanilla</span> {#nmessage}

```ssl
void NMessage(int msg_num)
```

Displays a message from the NAME message file in the message window. Shorthand macro for displaying script-specific messages.

**Parameters:**
- `msg_num` - Message number from the script's message file

Macro alias for `display_msg(message_str(NAME, msg_num))`.

---

## NOption <span class="tag-vanilla">vanilla</span> {#noption}

```ssl
void NOption(int msg_num, procedure target, int reaction)
```

Sets up a dialogue option using the script's NAME message file.

**Parameters:**
- `msg_num` - Message number
- `target` - Target procedure
- `reaction` - Reaction constant

Macro alias for `gsay_option(NAME, msg_num, target, reaction)`.

---

## BOption <span class="tag-vanilla">vanilla</span> {#boption}

```ssl
void BOption(int msg_num, procedure target, int reaction)
```

Sets up a dialogue option with a BAD reaction using the script's NAME message file.

Macro alias for `gsay_option(NAME, msg_num, target, REACTION_BAD)`.

---

## GOption <span class="tag-vanilla">vanilla</span> {#goption}

```ssl
void GOption(int msg_num, procedure target, int reaction)
```

Sets up a dialogue option with a GOOD reaction using the script's NAME message file.

Macro alias for `gsay_option(NAME, msg_num, target, REACTION_GOOD)`.

---

## Reply <span class="tag-vanilla">vanilla</span> {#reply}

```ssl
void Reply(int msg_num)
```

Sets up an NPC reply using the script's NAME message file.

Macro alias for `gsay_reply(NAME, msg_num)`.

---

## gSay_Start <span class="tag-vanilla">vanilla</span> {#gsay_start_macro}

```ssl
void gSay_Start
```

Macro alias for [`gsay_start`](#gsay_start). Commonly used in dialogue scripts.

---

## gSay_End <span class="tag-vanilla">vanilla</span> {#gsay_end_macro}

```ssl
void gSay_End
```

Macro alias for [`gsay_end`](#gsay_end). Ends a dialog sequence and displays it.

---

## gSay_Reply <span class="tag-vanilla">vanilla</span> {#gsay_reply_macro}

```ssl
void gSay_Reply(int msg_list, int msg_num)
```

Sets up a reply block (what the **critter** says). The `msg_list` determines which file to pull from, and `msg_num` determines which message number in that file.

Macro alias for [`gsay_reply`](#gsay_reply).

---

## gSay_Option <span class="tag-vanilla">vanilla</span> {#gsay_option_macro}

```ssl
void gSay_Option(int msg_list, int msg_num, procedure target, int reaction)
```

Sets up an option-choice for a reply block, getting the string from the message file. If chosen, causes the given reaction and jumps to the target procedure.

Macro alias for [`gsay_option`](#gsay_option).

---

## gSay_Message <span class="tag-vanilla">vanilla</span> {#gsay_message_macro}

```ssl
void gSay_Message(int msg_list, int msg_num, int reaction)
```

Sets up a sayMessage, which is a reply with just a [Done] option. The `msg_list` determines which file to pull from, and `msg_num` determines which message number in that file.

Macro alias for [`gsay_message`](#gsay_message).

---

## giQ_Option <span class="tag-vanilla">vanilla</span> {#giq_option_macro}

```ssl
void giQ_Option(int iq_test, int msg_list, int msg_num, procedure target, int reaction)
```

Sets up an IQ-dependent dialogue option. If `iq_test` is positive, the option shows only if player IQ is greater than or equal to that value. If negative, shows only if player IQ is less than or equal to the absolute value.

Macro alias for [`giq_option`](#giq_option).