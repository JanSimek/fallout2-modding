---
sidebar_position: 7
title: Combat Functions
description: SSL functions for combat system interaction
tags: [vanilla]
---

# Combat Functions

Functions for initiating combat, attacking, and managing combat state.

## attack <span class="tag-vanilla">vanilla</span> {#attack}

```ssl
void attack(ObjectPtr who)
```

Causes the focused object (`self`) to attempt to attack an object.

Macro alias for [`attack_complex`](#attack_complex)`(who, 0, 1, 0, 0, 30000, 0, 0)`.

**Parameters:**
- `who` - Target to attack

<FnRef fn="attack_complex" />

---

## attack_complex <span class="tag-vanilla">vanilla</span> {#attack_complex}

```ssl
void attack_complex(ObjectPtr who, int called_shot, int num_attacks, int bonus, int min_damage, int max_damage, int attacker_results, int target_results)
```

Causes the current object (`self` - must be a critter) to attempt to attack a critter with various parameters modifying the combat.

**Parameters:**
- `who` - Target critter
- `called_shot` - 0 = none, 1 = random, or specific body part
- `num_attacks` - Extra attacks before target can respond
- `bonus` - Bonus to hit on first turn only
- `min_damage` - Minimum damage on first attack
- `max_damage` - Maximum damage on first attack
- `attacker_results` - State attacker ends in after first attack
- `target_results` - State target ends in after first attack

**Example:**
```ssl
// Attack with +20% to hit and guaranteed 10-20 damage
attack_complex(target_obj, 0, 0, 20, 10, 20, 0, 0);
```


<FnRef fn="attack_complex" />
---

## attack_setup <span class="tag-vanilla">vanilla</span> {#attack_setup}

```ssl
void attack_setup(ObjectPtr who, ObjectPtr victim)
```

Sets up an attack from one object on another, without expecting this script to be involved. Can be used to setup attacks on critters from the map script.

**Parameters:**
- `who` - Attacker
- `victim` - Target


<FnRef fn="attack_setup" />
---

## combat_difficulty <span class="tag-vanilla">vanilla</span> {#combat_difficulty}

```ssl
int combat_difficulty
```

Returns the current Combat difficulty level of the game (defined in the options screen).

**Returns:** `int` - Difficulty level constant


<FnRef fn="combat_difficulty" />

---

## combat_is_initialized <span class="tag-vanilla">vanilla</span> {#combat_is_initialized}

```ssl
int combat_is_initialized
```

Returns True if the system is currently in combat mode, False otherwise.

**Returns:** `int` - Boolean

**Example:**
```ssl
if (combat_is_initialized) then begin
    display_msg("Combat is active!");
end
```


<FnRef fn="combat_is_initialized" />
---

## get_attack_type <span class="tag-sfall">sfall</span> {#get_attack_type}

```ssl
int get_attack_type
```

Returns the current attack type/mode.

**Returns:** `int` - The attack type, or -1 if not in combat

<FnRef fn="get_attack_type" />

---

## get_bodypart_hit_modifier <span class="tag-sfall">sfall</span> {#get_bodypart_hit_modifier}

```ssl
int get_bodypart_hit_modifier(int bodypart)
```

Gets the hit chance penalty for targeting a specific body part.

**Parameters:**
- `bodypart` - The body part constant

**Returns:** `int` - The hit chance penalty

<FnRef fn="get_bodypart_hit_modifier" />

---

## get_weapon_ammo_count <span class="tag-sfall">sfall</span> {#get_weapon_ammo_count}

```ssl
int get_weapon_ammo_count(ObjectPtr weapon)
```

Gets the current ammo count in a weapon.

**Parameters:**
- `weapon` - The weapon object

**Returns:** `int` - The ammo count

<FnRef fn="get_weapon_ammo_count" />

---

## get_weapon_ammo_pid <span class="tag-sfall">sfall</span> {#get_weapon_ammo_pid}

```ssl
int get_weapon_ammo_pid(ObjectPtr weapon)
```

Gets the PID of the ammo type currently loaded in a weapon.

**Parameters:**
- `weapon` - The weapon object

**Returns:** `int` - The ammo PID, or -1 if invalid

<FnRef fn="get_weapon_ammo_pid" />

---

## metarule2_explosions <span class="tag-sfall">sfall</span> {#metarule2_explosions}

```ssl
any metarule2_explosions(int metarule, int param1, int param2)
```

Controls various explosion-related settings.

**Parameters:**
- `metarule` - The explosion metarule constant:
  - 1: EXPL_FORCE_EXPLOSION_PATTERN - Set explosion pattern
  - 2: EXPL_FORCE_EXPLOSION_ART - Set explosion art FID
  - 3: EXPL_FORCE_EXPLOSION_RADIUS - Set explosion radius
  - 4: EXPL_FORCE_EXPLOSION_DMGTYPE - Set explosion damage type
  - 5: EXPL_STATIC_EXPLOSION_RADIUS - Set grenade/rocket radius
  - 6: EXPL_GET_EXPLOSION_DAMAGE - Get dynamite/plastic explosive damage
  - 7: EXPL_SET_DYNAMITE_EXPLOSION_DAMAGE - Set dynamite damage
  - 8: EXPL_SET_PLASTIC_EXPLOSION_DAMAGE - Set plastic explosive damage
  - 9: EXPL_SET_EXPLOSION_MAX_TARGET - Set max targets for explosions
- `param1` - First parameter (meaning depends on metarule)
- `param2` - Second parameter (meaning depends on metarule)

**Returns:** `any` - Result depends on the metarule used

<FnRef fn="metarule2_explosions" />

---

## set_bodypart_hit_modifier <span class="tag-sfall">sfall</span> {#set_bodypart_hit_modifier}

```ssl
void set_bodypart_hit_modifier(int bodypart, int penalty)
```

Sets the hit chance penalty for targeting a specific body part.

**Parameters:**
- `bodypart` - The body part constant
- `penalty` - The new hit chance penalty

<FnRef fn="set_bodypart_hit_modifier" />

---

## set_weapon_ammo_count <span class="tag-sfall">sfall</span> {#set_weapon_ammo_count}

```ssl
void set_weapon_ammo_count(ObjectPtr weapon, int count)
```

Sets the ammo count in a weapon.

**Parameters:**
- `weapon` - The weapon object
- `count` - The new ammo count

<FnRef fn="set_weapon_ammo_count" />

---

## set_weapon_ammo_pid <span class="tag-sfall">sfall</span> {#set_weapon_ammo_pid}

```ssl
void set_weapon_ammo_pid(ObjectPtr weapon, int ammoPID)
```

Sets the PID of the ammo type loaded in a weapon.

**Parameters:**
- `weapon` - The weapon object
- `ammoPID` - The new ammo PID

<FnRef fn="set_weapon_ammo_pid" />

---

## terminate_combat <span class="tag-vanilla">vanilla</span> {#terminate_combat}

```ssl
void terminate_combat
```

Tells the combat system to terminate prematurely.

:::warning
Use with caution! This doesn't prevent another (or even the same) script from re-starting combat. Make sure you turn off any hostile flags, etc.
:::


<FnRef fn="terminate_combat" />
